\documentclass[../../main.tex]{subfiles}

\usepackage{subfiles}
\usepackage{graphicx}
\usepackage{float}
\usepackage[utf8]{vietnam}
\usepackage{booktabs}
\usepackage{array}
\usepackage{longtable}
\usepackage[table]{xcolor}
\usepackage{geometry}
\geometry{margin=2.5cm}

% Define colors
\definecolor{headerblue}{RGB}{67, 113, 183}

% Custom column types
\newcolumntype{L}[1]{>{\raggedright\arraybackslash}p{#1}}
\newcolumntype{C}[1]{>{\centering\arraybackslash}p{#1}}

\begin{document}

\chapter{Xây dựng và triển khai ứng dụng}

\section{Tổng quan công nghệ}

Hệ thống quản lý kho được xây dựng với các công nghệ hiện đại, đảm bảo khả năng mở rộng và bảo trì. Dưới đây là các công nghệ chính được sử dụng trong dự án.

\subsection{Frontend}

\begin{itemize}
    \item \textbf{Framework:} Next.js 15 - framework React full-stack hỗ trợ Server Components, App Router và Server Actions
    \item \textbf{UI Library:} shadcn/ui - thư viện component dựa trên Radix UI, cung cấp các component accessible và có thể tùy chỉnh cao
    \item \textbf{Styling:} Tailwind CSS 4 - utility-first CSS framework cho việc styling nhanh chóng và nhất quán
    \item \textbf{State Management:} 
    \begin{itemize}
        \item Zustand - thư viện quản lý state nhẹ và đơn giản
        \item TanStack React Query - quản lý server state, caching và đồng bộ dữ liệu
    \end{itemize}
    \item \textbf{Forms:} React Hook Form + TanStack Form - xử lý form validation và quản lý state form
    \item \textbf{Animation:} Motion (Framer Motion) - thư viện animation mạnh mẽ cho React
    \item \textbf{Charts:} Recharts - thư viện biểu đồ dựa trên React và D3
    \item \textbf{Icons:} Lucide React - bộ icon SVG nhẹ và đẹp
\end{itemize}

\subsection{Backend}

\begin{itemize}
    \item \textbf{Backend Platform:} Convex - nền tảng Backend-as-a-Service (BaaS) cung cấp:
    \begin{itemize}
        \item Realtime database với tính năng reactive queries
        \item Serverless functions (mutations và queries)
        \item File storage tích hợp
        \item Scheduled jobs (cron tasks)
    \end{itemize}
    \item \textbf{Authentication:} Better Auth - giải pháp xác thực hiện đại cho TypeScript hỗ trợ:
    \begin{itemize}
        \item Email + Password authentication
        \item Email OTP verification
        \item Organization và multi-tenancy
        \item Role-based access control (RBAC)
    \end{itemize}
    \item \textbf{Validation:} Zod - thư viện schema validation TypeScript-first
\end{itemize}

\subsection{Database}

\begin{itemize}
    \item \textbf{Primary Database:} Convex Database - document database với các tính năng:
    \begin{itemize}
        \item Schema định nghĩa bằng TypeScript
        \item Automatic indexing và query optimization
        \item Realtime subscriptions
        \item ACID transactions
    \end{itemize}
    \item \textbf{Auth Database:} Neon PostgreSQL - serverless PostgreSQL cho Better Auth
    \item \textbf{ORM:} Drizzle ORM - TypeScript ORM nhẹ và type-safe cho PostgreSQL
    \item \textbf{Migration:} Drizzle Kit - công cụ migration cho Drizzle ORM
\end{itemize}

\subsection{Công cụ phát triển}

\begin{itemize}
    \item \textbf{Monorepo:} Turborepo - công cụ build system cho monorepo, tối ưu caching và parallel builds
    \item \textbf{Package Manager:} pnpm - package manager nhanh và tiết kiệm dung lượng
    \item \textbf{Language:} TypeScript - JavaScript với static typing
    \item \textbf{Linter/Formatter:} Biome - công cụ linting và formatting nhanh, thay thế ESLint + Prettier
    \item \textbf{Version Control:} Git, GitHub - quản lý mã nguồn và cộng tác nhóm
    \item \textbf{Code Editor:} Visual Studio Code - môi trường phát triển tích hợp
\end{itemize}

\section{Sơ đồ thành phần}

Sơ đồ thành phần (Component Diagram) mô tả cấu trúc các thành phần chính của hệ thống và mối quan hệ giữa chúng.

\subsection{Các thành phần chính}

Hệ thống được chia thành các thành phần độc lập sau:

\begin{itemize}
    \item \textbf{Web Application (apps/web):} Ứng dụng Next.js chạy trên trình duyệt
    \begin{itemize}
        \item Authentication Pages - Đăng nhập, đăng ký, xác thực OTP
        \item Dashboard Module - Hiển thị tổng quan hệ thống với biểu đồ
        \item Master Data Module - Quản lý danh mục, thương hiệu, sản phẩm, nhà cung cấp
        \item Purchase Orders Module - Quản lý đơn đặt hàng từ nhà cung cấp
        \item Receiving Sessions Module - Quản lý phiên nhận hàng
        \item Inventory Module - Quản lý tồn kho, lô hàng, vị trí lưu trữ
        \item Picking Sessions Module - Quản lý phiên lấy hàng
        \item Return Requests Module - Quản lý yêu cầu trả hàng
        \item Reports Module - Báo cáo và thống kê
        \item System Settings - Cài đặt hệ thống và phân quyền
    \end{itemize}
    
    \item \textbf{Backend Package (packages/backend):} Xử lý logic nghiệp vụ
    \begin{itemize}
        \item Convex Functions - Queries và mutations cho database operations
        \item Auth Module - Xử lý xác thực và phân quyền với Better Auth
        \item Permissions Library - Định nghĩa quyền và vai trò người dùng
    \end{itemize}
    
    \item \textbf{Config Package (packages/config):} Cấu hình chung cho toàn bộ monorepo
    
    \item \textbf{External Services:}
    \begin{itemize}
        \item Convex Cloud - Lưu trữ dữ liệu ứng dụng và serverless functions
        \item Neon PostgreSQL - Lưu trữ dữ liệu xác thực
        \item Resend - Dịch vụ gửi email (OTP, invitations)
    \end{itemize}
\end{itemize}

\subsection{Giao tiếp giữa các thành phần}

\begin{itemize}
    \item Web Application giao tiếp với Convex thông qua Convex Client với WebSocket realtime connection
    \item Convex Functions truy cập Convex Database trực tiếp với type-safe queries
    \item Better Auth sử dụng Drizzle ORM để truy cập Neon PostgreSQL
    \item Auth data được đồng bộ từ Better Auth sang Convex Database để sử dụng trong ứng dụng
    \item Email notifications được gửi qua Resend API
\end{itemize}

\section{Sơ đồ triển khai}

Sơ đồ triển khai (Deployment Diagram) mô tả cách các thành phần phần mềm được triển khai trên hạ tầng phần cứng.

\subsection{Môi trường triển khai}

Hệ thống sử dụng kiến trúc Serverless với các node sau:

\begin{itemize}
    \item \textbf{Client Node:} Thiết bị của người dùng cuối
    \begin{itemize}
        \item Trình duyệt web hiện đại (Chrome, Firefox, Safari, Edge)
        \item Hỗ trợ responsive design cho mobile và tablet
        \item WebSocket connection cho realtime updates
    \end{itemize}
    
    \item \textbf{Vercel Edge Network:} Hosting cho Next.js application
    \begin{itemize}
        \item Next.js App deployed dưới dạng serverless functions
        \item Edge caching cho static assets
        \item Automatic HTTPS với SSL certificates
        \item Global CDN distribution
    \end{itemize}
    
    \item \textbf{Convex Cloud:} Backend-as-a-Service
    \begin{itemize}
        \item Convex Database - document database
        \item Serverless Functions - queries, mutations, actions
        \item File Storage - lưu trữ hình ảnh và tài liệu
        \item Scheduled Functions - cron jobs cho automated tasks
    \end{itemize}
    
    \item \textbf{Neon:} Serverless PostgreSQL
    \begin{itemize}
        \item Better Auth data storage
        \item Automatic scaling và connection pooling
        \item Point-in-time recovery
    \end{itemize}
    
    \item \textbf{Resend:} Email Service
    \begin{itemize}
        \item Transactional emails (OTP, invitations)
        \item Email templates với React Email
    \end{itemize}
\end{itemize}

\subsection{Kết nối mạng}

\begin{itemize}
    \item Client kết nối tới Vercel qua HTTPS (port 443)
    \item Next.js Server gọi Better Auth API routes qua internal network
    \item Convex Client sử dụng WebSocket connection tới Convex Cloud
    \item Better Auth kết nối tới Neon PostgreSQL qua connection pooling
    \item Serverless functions gọi Resend API qua HTTPS
\end{itemize}

\subsection{Chiến lược triển khai}

\begin{itemize}
    \item \textbf{Development:} 
    \begin{itemize}
        \item Local Next.js development server (port 3000)
        \item Convex dev mode với local sync
        \item Drizzle Studio cho database management
    \end{itemize}
    \item \textbf{Preview:} Vercel Preview Deployments cho mỗi Pull Request
    \item \textbf{Production:} 
    \begin{itemize}
        \item Vercel Production deployment
        \item Convex Production environment
        \item Neon Production database
    \end{itemize}
    \item \textbf{CI/CD:} 
    \begin{itemize}
        \item GitHub Actions cho automated testing
        \item Vercel Git Integration cho automatic deployments
        \item Turborepo remote caching
    \end{itemize}
\end{itemize}

\section{Bảng phân công công việc}

Bảng dưới đây mô tả phân công công việc cho các thành viên trong nhóm phát triển.

\begin{table}[H]
\centering
\begin{tabular}{|C{0.8cm}|L{3.5cm}|L{5cm}|L{3cm}|C{2cm}|}
\hline
\rowcolor{headerblue}
\textcolor{white}{\textbf{STT}} & 
\textcolor{white}{\textbf{Thành viên}} & 
\textcolor{white}{\textbf{Công việc}} & 
\textcolor{white}{\textbf{Module}} & 
\textcolor{white}{\textbf{Tiến độ}} \\
\hline
1 & Đặng Minh Nhật & Phân tích yêu cầu, thiết kế hệ thống & Tất cả & 100\% \\
\hline
2 & Trương Lê Nguyên & Thiết kế database schema, Convex backend & Database, Backend & 100\% \\
\hline
3 & Nguyễn Đức Nhân & Phát triển giao diện với Next.js, shadcn/ui & Frontend & 100\% \\
\hline
4 & Thang Tuấn Phát & Phát triển module quản lý kho, nhận hàng & Inventory, Receiving & 100\% \\
\hline
5 & Dương Đình Hiếu & Phát triển module đơn hàng, trả hàng & Orders, Returns & 100\% \\
\hline
6 & Tất cả & Kiểm thử, tích hợp, triển khai & Tất cả & 100\% \\
\hline
\end{tabular}
\caption{Bảng phân công công việc nhóm}
\end{table}

\subsection{Chi tiết phân công theo giai đoạn}

\subsubsection{Giai đoạn 1: Phân tích và Thiết kế (Tuần 1-2)}

\begin{itemize}
    \item Thu thập yêu cầu, phân tích nghiệp vụ quản lý kho
    \item Thiết kế Use Case Diagram, Class Diagram
    \item Thiết kế Convex database schema với TypeScript
    \item Thiết kế UI/UX với Figma, xác định component structure
\end{itemize}

\subsubsection{Giai đoạn 2: Setup Infrastructure và Backend (Tuần 3-5)}

\begin{itemize}
    \item Thiết lập monorepo với Turborepo và pnpm
    \item Cấu hình Convex project, định nghĩa schema
    \item Thiết lập Better Auth với Neon PostgreSQL
    \item Phát triển Convex functions cho các module: Products, Inventory, Orders
    \item Cấu hình permissions và role-based access control
\end{itemize}

\subsubsection{Giai đoạn 3: Phát triển Frontend (Tuần 4-6)}

\begin{itemize}
    \item Thiết lập Next.js project với App Router
    \item Cấu hình shadcn/ui, Tailwind CSS, theme system
    \item Phát triển layout components (Sidebar, Header, Navigation)
    \item Phát triển các trang: Dashboard, Master Data, Purchase Orders, Inventory
    \item Tích hợp Convex realtime queries với TanStack Query
    \item Responsive design và mobile optimization
\end{itemize}

\subsubsection{Giai đoạn 4: Kiểm thử và Triển khai (Tuần 7-8)}

\begin{itemize}
    \item Kiểm thử chức năng với Convex Dashboard
    \item Kiểm thử tích hợp giữa Frontend và Backend
    \item Kiểm thử giao diện người dùng trên nhiều thiết bị
    \item Performance optimization với React Compiler
    \item Deploy lên Vercel production
    \item Cấu hình Convex production environment
\end{itemize}

\end{document}